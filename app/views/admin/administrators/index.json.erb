<%
  output = {
    :iTotalDisplayRecords => @admins.total_entries || 0,
    :aaData => @admins.collect do |admin|
      link_id = "admin_#{admin.id}"
      klass = admin.active? ? 'see-on' : 'see-off'
      [
        content_tag(:div,
          content_tag(:div, '', :class => 'handler') +
          content_tag(:div, '&nbsp;', :id => link_id, :class => 'small-icons admin-ico'),
          :class => 'handler_container'),
        content_tag(:div, link_to("#{admin.firstname} #{admin.lastname}", [forgeos_core, :edit, :admin, admin]), :class => 'admin-name'),
        admin.role.name,
        content_tag(:div, mail_to(admin.email, admin.email), :class => 'email' ),
        link_to('', :url => forgeos_core.activate_admin_administrator_path(admin),
          :remote => true,
          :complete => "toggleActivate('#show_#{link_id}')",
          :html => {
            :class => "small-icons #{klass}",
            :id => "show_#{link_id}"
        }),
        link_to('', '#', :class => 'small-icons duplicate-link') +
        link_to('', [forgeos_core, :edit, :admin, admin], :class => 'small-icons edit-link') +
        link_to('', :url => [forgeos_core, :admin, admin],
          :remote => true,
          :method => :delete,
          :confirm => I18n.t('admin.destroy.confirm').capitalize,
          :success => "removedataTablesRow('#destroy_#{link_id}')",
          :html => {
          :class => 'small-icons destroy-link', :id => "destroy_#{link_id}"
        })
      ]
  end
}
-%>
<%= raw output.to_json -%>
