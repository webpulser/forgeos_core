#imagevisualsUploadDialog.upload-lightbox-container.white
  #imagevisualsUpload
    /= form.file_field :uploaded_data
    /= hidden_field_tag :target, params[:target]
    /= hidden_field_tag :target_id, params[:target_id]
    /= form.submit I18n.t('save').capitalize

  %span= I18n.t('or')
  = link_to_function I18n.t('media.add_from_library'), "$('#imagevisualsSelectDialog').dialog('open');"

#imagevisualsSelectDialog.media-hoverlay.project
  .media-hoverlay-header
    = link_to_function content_tag(:span, I18n.t('media.picture.upload.action').capitalize, :class=>'big-icons add-picture'), "$(\'#imagevisualsUploadDialog\').dialog(\'open\'); $(\'#imagevisualsSelectDialog\').dialog(\'close\')", :class=>'backgrounds button'
    .display-mode
      .heading-separator
      .display-thumbnails
      .display-list.off
    .right.image
      %a.small-icons.left.search-link{ :href => "#" }
        %span.small-icons.search-span= I18n.t('search').capitalize
    .backgrounds.search-form-image
    .backgrounds.search-form-thumbnails
  .media-hoverlay-sidebar.grid_3.omega.alpha
    .sidebar-content
      %h2{ :class => 'small-icons picture'}
        = link_to_function I18n.t('media.picture.all').capitalize, "select_all_elements_without_category('picture-attachment-tree')"
      #picture-attachment-tree
  .media-hoverlay-content.thumbnails
    #thumbnail-table-visuals.table.datatable.media.selectable_rows
  .media-hoverlay-content.table.hidden
    %table#image-table-visuals.datatable.media.selectable_rows
      %tr
        %td

= dataSlides_tag :url => forgeos_core.admin_pictures_path(:format => :json, :skin => 'thumbnail', :mode => 'selection'), :columns => [ '{ "bSortable": true, "bSearchable": true, "sType": "string", "bUseRendered": true, "fnRender": null, "iDataSort": 0, "nTf": null, "nTh": function(){$(".thead").find(".th");}, "sWidth": "0px"}','{"bVisible": false}', '{ "bVisible": false }', '{ "bVisible": false}' ], :id => 'thumbnail-table-visuals', :autostart => false

= dataTables_tag :id => 'image-table-visuals', :url => forgeos_core.admin_pictures_path(:format => :json, :mode => 'selection'),:columns => ["{'sClass':'th-checkbox-container', 'bSortable': false }",    "{ 'sTitle': '#{I18n.t('media.filename')}'}",    "{ 'sTitle': '#{I18n.t('media.content_type')}'}",    "{ 'sTitle': '#{I18n.t('media.updated_at')}'}",   "{ 'sTitle': '#{I18n.t('media.size')}'}",   '{"bVisible": false}', '{ "bVisible": false }', '{ "bVisible": false}','{ "bVisible": false}',    '{ "bVisible": false}'], :autostart => false

:javascript
  function add_picture_to_visuals(path,id,name){
    var object_name='#{form.object_name}';
    jQuery('#visuals-picture ul.sortable').before('<li><a href="#" onclick="jQuery(this).parents(\'li\').remove(); return false;" class="big-icons trash"></a><input type="hidden" name="'+object_name+'[attachment_ids][]" value="'+id+'"/><img src="'+path+'" alt="'+name+'"/><div class="handler"><div class="inner"></div></div></li>');
  }
