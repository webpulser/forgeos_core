<%
  output = {
    :sEcho => params[:sEcho],
    :iTotalRecords => Forgeos::Right.count,
    :iTotalDisplayRecords => @rights.total_entries || 0,
    :aaData => @rights.collect do |right|
      [
        content_tag(:div,
          content_tag(:div, '', :class => 'handler') +
          content_tag(:div, '', :id => polymorphic_html_id(right), :class => 'small-icons right-ico'),
          :class => 'handler_container'),
        content_tag(:div, right.name, :class => 'right-name'),
        right.controller_name,
        right.action_name,
        content_tag(:span, "&nbsp;".html_safe, :class => 'small-icons duplicate-link duplicate-right') +
        content_tag(:span, "&nbsp;".html_safe, :class => 'small-icons edit-link edit-right') +
        link_to('', [forgeos_core, :admin, right],
          :remote => true,
          :method => :delete,
          :confirm => I18n.t('right.destroy.confirm').capitalize,
          :class => 'small-icons destroy-link',
          :id => polymorphic_html_id(right, 'destroy')
        )
      ]
    end
 }
-%>
<%= raw output.to_json %>
